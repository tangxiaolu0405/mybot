---
name: task-evolution-executor
description: 在单次任务执行过程中集成任务处理、记忆迭代和自主进化。负责协调任务执行的完整生命周期，包括准备、执行、记忆迭代和进化评估四个阶段。
version: 1.0.0
author: CLAW Team
tags: [evolution, task-execution, memory-iteration, self-improvement]
dependencies: [memory-reader]
---

# Task Evolution Executor

## 功能描述

在单次任务执行过程中集成任务处理、记忆迭代和自主进化。协调任务执行的完整生命周期，包括准备、执行、记忆迭代和进化评估四个阶段，确保每次任务执行都能推动系统的自我进化。

## 使用场景

- 执行需要记忆支持的任务
- 需要在任务完成后进行记忆迭代
- 需要评估任务执行效果并优化思维模式
- 需要记录任务执行过程中的关键决策和经验
- 需要建立任务与记忆的关联关系

## 指令说明

### 基础指令

- **执行进化任务**：执行完整的任务进化流程
- **任务准备**：检索相关记忆、识别技能、加载上下文
- **任务执行**：执行主任务、记录决策、记录错误
- **记忆迭代**：提炼信息、更新记忆、建立关联
- **进化评估**：评估效果、分析模式、识别优化

### 高级指令

- **实时进化**：在任务执行过程中实时进行记忆迭代
- **深度进化**：进行完整的模式分析和优化
- **快速进化**：简化流程，快速完成核心进化步骤

## 执行流程

### 阶段1：任务准备

1. **检索相关记忆**
   - 使用 memory-reader 检索长期记忆
   - 检索短期记忆中的会话上下文
   - 识别与任务相关的历史决策和经验

2. **识别所需技能**
   - 分析任务需求
   - 检查技能索引
   - 确定技能依赖关系

3. **加载上下文**
   - 构建任务上下文
   - 加载相关配置和参数
   - 初始化工作记忆

### 阶段2：任务执行

1. **执行主任务**
   - 按照任务要求执行操作
   - 使用识别的技能和工具
   - 遵循最佳实践

2. **实时记录**
   - 记录关键决策和理由
   - 记录遇到的错误和解决方案
   - 记录用户反馈和修正

3. **执行验证**
   - 验证任务完成情况
   - 检查结果质量
   - 收集用户满意度反馈

### 阶段3：记忆迭代

1. **提炼关键信息**
   - 提取任务中的关键知识点
   - 识别成功的模式和解决方案
   - 总结失败的教训和原因

2. **更新短期记忆**
   - 记录任务执行过程
   - 记录任务结果和用户反馈
   - 更新会话上下文

3. **评估长期记忆提升**
   - 评估信息的长期价值
   - 检查是否满足提升条件（访问>5次、存在>1小时、重要性>0.7）
   - 识别需要关联的记忆

4. **建立记忆关联**
   - 提取关键词
   - 搜索相似记忆
   - 建立关联关系

### 阶段4：自主进化

1. **评估执行效果**
   - 计算成功指标（解决率、满意度、效率）
   - 计算失败指标（错误率、重试次数、用户修正）
   - 对比历史基线

2. **分析模式表现**
   - 识别使用的思维模式
   - 评估模式效果
   - 检查是否需要优化

3. **识别优化机会**
   - 检查模式是否连续10次效果低于阈值
   - 检查用户反馈是否连续3次为负面
   - 发现更优的替代方案

4. **更新思维模式**
   - 记录优化建议
   - 更新模式权重
   - 记录进化过程

## 记忆操作

### 执行前
- 从长期记忆检索相关知识和经验
- 从短期记忆加载会话上下文
- 将任务信息存储到工作记忆

### 执行中
- 实时记录关键决策到工作记忆
- 记录错误和解决方案
- 记录用户反馈

### 执行后
- 将成功案例提升到长期记忆
- 更新相关记忆的成功/失败统计
- 建立问题与解决方案的强关联
- 提炼可复用的模式到长期记忆
- 记录用户偏好和满意度
- 更新记忆的时效性和重要性权重

## 进化指标

### 成功指标
- 问题解决率：成功解决的问题占总问题的比例
- 用户满意度：用户反馈的满意度评分
- 执行效率：完成任务所需的时间和资源
- 技能利用率：技能被有效使用的频率
- 记忆命中率：从记忆中检索到有用信息的比例

### 失败指标
- 错误率：执行过程中出现错误的频率
- 重试次数：需要重试才能完成的任务比例
- 用户修正：用户需要修正AI输出的次数
- 资源浪费：无效操作消耗的资源

## 最佳实践

- 任务开始前必须检索相关记忆
- 执行过程中实时记录关键信息
- 任务完成后必须进行记忆迭代
- 定期评估思维模式的效果
- 保持记忆的时效性和准确性
- 建立强关联以提高记忆命中率

## 注意事项

- 记忆操作需要遵循流转规则
- 进化评估需要基于客观数据
- 优化建议需要谨慎验证
- 保持思维模式的稳定性
- 避免过度优化导致的不稳定
- 保护用户隐私和敏感信息
